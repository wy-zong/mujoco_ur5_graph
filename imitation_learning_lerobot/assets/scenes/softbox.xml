<mujoco model="Soft box">
  <!-- <include file="scene.xml"/> -->

  <!-- <option solver="CG" tolerance="1e-6"/> -->
  <option timestep="0.002" integrator="implicitfast" solver="PGS"
        gravity="0 0 -9.81" cone="elliptic" noslip_iterations="200" impratio="10"/>
        
  <asset>
    <texture name="texsponge" type="2d" file="sponge.png"/>
    <material name="matsponge" texture="texsponge" specular="0.3"  />
  </asset>

  <!-- <worldbody>
    <body pos="1.35 0.5 0.77" name="body">
      <freejoint/>
      <geom size=".005" contype="0" conaffinity="0" group="4" friction="1.0 0.05 0.001 "/>
      <flexcomp name="softbox" type="box" count="3 3 3" spacing=".015 .015 .015"
                radius="0.002" dim="3" material="matsponge" dof="radial">
        <contact internal="false" selfcollide="none"/>
        <elasticity  poisson="0.4032740512363587" thickness="0.0005" young="852.02369946481"/>
        <edge damping="0.8" equality="true"/>
      </flexcomp>
    </body>
  </worldbody> -->
  
  <worldbody>
    <body name="testbody" pos="1.4 0.72 0.77">
      <freejoint/>
      <!-- 夾具-物體接觸時依需要也可把夾具 geom 提高摩擦 -->
      <geom size=".005"   />

      <flexcomp name="testbox" type="box" count="4 4 4" spacing=".012 .012 .012"
                radius="0.006" dim="3" material="matsponge" dof="radial" mass=".5">
        <elasticity young="1e4" poisson="0.1" damping=".05"/>
        <contact selfcollide="none" internal="false" contype="2" conaffinity="2"/>

        <!-- 阻尼適中，避免反射性彈跳 -->
        <edge equality="true" damping="0.98"/>
      </flexcomp>
    </body>
  </worldbody>

  <worldbody>
    <body pos="1.3 0.72 0.77" name="body">
      <freejoint/>
      <!-- 夾具-物體接觸時依需要也可把夾具 geom 提高摩擦 -->
      <geom size=".005" contype="0" conaffinity="0" group="4" friction="1.2 0.05 0.001"/>

      <flexcomp name="softbox" type="box" count="4 4 4" spacing=".012 .012 .012"
                radius="0.006" dim="3" material="matsponge" dof="radial">
        <!-- 接觸較柔，減少彈跳 -->
        <contact internal="false" selfcollide="none"
                solref="0.02 2" solimp="0.98 0.9999 0.0001"
                friction="1.2 0.06 0.002"/>

        <!-- 內部更軟，體積保持適中 -->
        <elasticity poisson="0.49" thickness="0.002" young="200000"/>

        <!-- 阻尼適中，避免反射性彈跳 -->
        <edge equality="true" damping="0.98"/>
      </flexcomp>
    </body>
  </worldbody>

  <worldbody>
    <body pos="1.25 0.4 0.77" name="rigid_box">
    <freejoint/>

    <!-- 剛體碰撞幾何（同時作為顯示；若你要分開視覺/碰撞，見下方備用版） -->
    <geom name="rigid_box_col" type="box" size="0.018 0.018 0.018" density="2500" friction="1.2 0.05 0.001" solimp="0.9 0.995 0.005" solref="0.001 1" material="matsponge"/>
  </body>
  </worldbody>
</mujoco>
